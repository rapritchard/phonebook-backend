{"version":3,"sources":["components/Filter.js","services/persons.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","showFilter","setShowFilter","value","onChange","event","target","baseUrl","axios","get","then","response","data","newObject","post","id","console","log","put","delete","PersonForm","newName","setNewName","newNumber","setNewNumber","persons","setPersons","setnotificationMessage","updatePerson","person","changedPerson","number","personService","returnedPerson","messageText","name","error","setTimeout","map","p","catch","filter","type","onClick","preventDefault","matchedPerson","toLowerCase","trim","length","window","confirm","concat","Persons","toggleDelete","Notification","message","className","App","useState","notificationMessage","useEffect","initalPersons","toggleDeleteOf","find","includes","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.be1a91d1.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ showFilter, setShowFilter }) => {\r\n  const handleFilterChange = (event) => {\r\n    setShowFilter(event.target.value)\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      Filter shown with <input value={showFilter} onChange={handleFilterChange}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  console.log(`${baseUrl}/${id}`);\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteRecord = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, deleteRecord }","import React from 'react';\r\nimport personService from '../services/persons';\r\n\r\nconst PersonForm = ({ \r\n  newName, \r\n  setNewName, \r\n  newNumber, \r\n  setNewNumber, \r\n  persons, \r\n  setPersons,\r\n  setnotificationMessage\r\n  }) => {\r\n\r\n  const updatePerson = person => {\r\n    const id = person.id;\r\n    const changedPerson = { ...person, number: newNumber }\r\n    console.log(person);\r\n    personService\r\n      .update(id, changedPerson).then(returnedPerson => {\r\n        setnotificationMessage({messageText: `Updated ${returnedPerson.name}'s number`, error: false})\r\n        setTimeout(() => {\r\n          setnotificationMessage({messageText: null})\r\n        }, 3000)\r\n        setPersons(persons.map(p => p.id !== id ? p : returnedPerson));\r\n      }).catch(error => {\r\n        setnotificationMessage({messageText: `The record for ${person.name} no longer exists on the server.`, error: true})\r\n        setTimeout(() => {\r\n          setnotificationMessage({messageText: null})\r\n        }, 3000)\r\n        setPersons(persons.filter(p => p.id !== id));\r\n      });\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const matchedPerson = persons.filter(person => \r\n      person.name.toLowerCase() === newName.toLowerCase().trim());\r\n\r\n    if(matchedPerson.length){\r\n      if(window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)){\r\n        updatePerson(matchedPerson[0]);\r\n        return true;\r\n      }\r\n    }\r\n\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    personService\r\n      .create(newPerson).then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson));\r\n        setNewName('');\r\n        setNewNumber('');\r\n        setnotificationMessage({messageText: `Added ${returnedPerson.name}`, error: false})\r\n        setTimeout(() => {\r\n          setnotificationMessage({messageText: null})\r\n        }, 3000)\r\n      });\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <form>\r\n      <div>\r\n        <div>Name: <input value={newName} onChange={handleNameChange} /></div>\r\n        <div>Number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" onClick={addPerson}>Add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst Persons = ({ name, number, toggleDelete }) => (\r\n  <div>\r\n    {name} {number} <button onClick={toggleDelete}>Delete</button>\r\n  </div>\r\n)\r\n\r\nexport default Persons;\r\n","import React from 'react';\r\n\r\nconst Notification = ({ message }) => {\r\n  if(message.messageText ===  null) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={message.error ? 'message error' : 'message success'}>\r\n      {message.messageText}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [showFilter, setShowFilter] = useState(\"\");\r\n  const [notificationMessage, setnotificationMessage] = useState({\r\n    messageText: null,\r\n    error: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(initalPersons => {\r\n      setPersons(initalPersons);\r\n    });\r\n  }, []);\r\n\r\n  const displayPersons = () => {\r\n    const filteredPersons = persons.filter(person =>\r\n      person.name.toLowerCase().includes(showFilter.toLowerCase())\r\n    );\r\n\r\n    return filteredPersons.map(person => (\r\n      <Persons\r\n        key={person.id}\r\n        name={person.name}\r\n        number={person.number}\r\n        toggleDelete={() => toggleDeleteOf(person.id)}\r\n      />\r\n    ));\r\n  };\r\n\r\n  const toggleDeleteOf = id => {\r\n    const person = persons.find(p => p.id === id);\r\n    if (window.confirm(`Delete ${person.name}?`)) {\r\n      personService\r\n        .deleteRecord(id)\r\n        .then(() => {\r\n          setPersons(persons.filter(p => p.id !== id));\r\n        })\r\n        .catch(error => {\r\n          setnotificationMessage({\r\n            messageText: `The number for ${person.name} was already deleted from the server`,\r\n            error: true\r\n          });\r\n          setTimeout(() => {\r\n            setnotificationMessage({ messageText: null });\r\n          }, 3000);\r\n          setPersons(persons.filter(p => p.id !== id));\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notificationMessage} />\r\n      <Filter showFilter={showFilter} setShowFilter={setShowFilter} />\r\n      <h2>Add New</h2>\r\n      <PersonForm\r\n        newName={newName}\r\n        setNewName={setNewName}\r\n        newNumber={newNumber}\r\n        setNewNumber={setNewNumber}\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        setnotificationMessage={setnotificationMessage}\r\n      />\r\n      <h2>Numbers</h2>\r\n      {displayPersons()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}